if hp < maxhp
    @setvar! needsHeal 1 

    if needsHeal = 1 and findlayer self "outerbody" as PotionStore 
        getlabel PotionStore PotionStoreLabel
        if 'potion satchel' in PotionStoreLabel
            if findtype "Yellow Potion" PotionStore as PotionYellow
                getlabel PotionYellow PotionYellowLabel
                if 'next usable' in PotionYellowLabel
                    sysmsg 'FAILED: {{PotionYellowLabel}}' 33          
                else
                    sysmsg "[Satchel] Drinking {{PotionYellowLabel}}" 68
                    dclick PotionYellow
                endif
                @setvar! needsHeal 0
            endif
        endif
    endif
        
    if needsHeal = 1 and findtype "alchemists satchel" backpack as PotionStore 
        getlabel PotionStore PotionStoreLabel
        if 'potion satchel' in PotionStoreLabel
            if findtype "Yellow Potion" PotionStore as PotionYellow
                getlabel PotionYellow PotionYellowLabel
                if 'next usable' in PotionYellowLabel
                    sysmsg 'FAILED: {{PotionYellowLabel}}' 33          
                else
                    sysmsg "[Satchel] Drinking {{PotionYellowLabel}}" 68
                    dclick PotionYellow
                endif
                @setvar! needsHeal 0
            endif
        endif
    endif 
       
    if needsHeal = 1 and findtype "Yellow Potion" backpack as PotionYellow
        getlabel PotionYellow PotionYellowLabel
        if 'next usable' in PotionYellowLabel
            sysmsg 'FAILED: {{PotionYellowLabel}}' 33          
        else
            sysmsg "[Backpack] Drinking {{PotionYellowLabel}}" 68
            dclick PotionYellow
        endif
        @setvar! needsHeal 0
    endif

    if needHeal = 1 
        sysmsg 'No Yellow Potion found!' 33
    endif
endif
